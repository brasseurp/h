<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pierre Brasseur">
<meta name="dcterms.date" content="2024-10-20">

<title>Un travail d’amour – Blog de Pierre Brasseur: sociologue</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Blog de Pierre Brasseur: sociologue</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Blog de Pierre Brasseur</span></a>
  </li>  
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">/h/index.html</span>
    </span>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://pbrasseur.github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://p_brasseur.x.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Un travail d’amour</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">sociologie</div>
                <div class="quarto-category">amour</div>
                <div class="quarto-category">travail</div>
                <div class="quarto-category">care</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Pierre Brasseur </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 20, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Aujourd’hui, j’ai participé au cours d’Anthropologie du travail, animé par Kostia Lennas. J’y ai présenté ma perspective sur la notion de “travail d’amour”, en m’appuyant sur deux textes : celui de Hilary Graham, « Caring: A Labour of Love » dans l’ouvrage <em>A Labour of Love</em> (1983), ainsi que l’article de G. Cresson, « La santé, production invisible des femmes », publié en 1991 dans <em>Recherches féministes</em>.</p>
<p>Je vous livre ici le texte de mon intervention :</p>
<blockquote class="blockquote">
<p>Le <strong>“travail d’amour”</strong> est un concept qui désigne l’ensemble des soins non rémunérés, principalement effectués par les femmes, combinant des aspects émotionnels (amour, attachement) et des tâches concrètes (soins physiques, soutien moral). Bien que ces activités soient indispensables au bien-être des individus et à la cohésion sociale, elles sont largement invisibilisées et sous-évaluées. Ce terme est au cœur des discussions sur l’inégalité de genre et l’économie des soins, en particulier dans les travaux de sociologues comme <strong>Hilary Graham</strong> et <strong>Geneviève Cresson</strong>. En explorant le <strong>travail d’amour</strong> dans les sphères privée et publique, nous pouvons mieux comprendre son rôle central et les inégalités qui en découlent.</p>
</blockquote>
<section id="le-travail-damour-dans-la-sphère-privée-invisibilité-et-dévalorisation" class="level3">
<h3 class="anchored" data-anchor-id="le-travail-damour-dans-la-sphère-privée-invisibilité-et-dévalorisation">1. Le “travail d’amour” dans la sphère privée : invisibilité et dévalorisation</h3>
<p>Dans le contexte domestique, le <strong>travail d’amour</strong> recouvre l’ensemble des tâches liées à l’entretien du foyer, à l’éducation des enfants et au soutien émotionnel des membres de la famille. Cependant, ces activités, bien que fondamentales, sont souvent perçues comme une extension naturelle du rôle féminin, et non comme un véritable travail méritant reconnaissance ou rémunération.</p>
<section id="exemple-soins-aux-enfants" class="level4">
<h4 class="anchored" data-anchor-id="exemple-soins-aux-enfants">Exemple : Soins aux enfants</h4>
<p>Une mère qui soigne un enfant malade, qui prépare des repas équilibrés ou qui veille à la prise de médicaments réalise un travail qui nécessite des compétences, de l’attention et du temps. Pourtant, comme l’explique <strong>Geneviève Cresson</strong> dans son article <strong>“La santé, production invisible des femmes”</strong>, ce travail est largement invisibilisé car il est considéré comme une manifestation naturelle de l’amour maternel. Cresson souligne que “les femmes, dans leurs témoignages, minimisent leur rôle dans le soin, le considérant souvent comme un devoir naturel plutôt que comme une contribution réelle à la société” (Cresson, 1991). Ce déni de la valeur économique du <strong>travail d’amour</strong> conduit à sa marginalisation dans les discussions sur le travail et les droits économiques.</p>
</section>
<section id="conséquence-la-charge-mentale" class="level4">
<h4 class="anchored" data-anchor-id="conséquence-la-charge-mentale">Conséquence : La charge mentale</h4>
<p>La <strong>charge mentale</strong> est une autre dimension du <strong>travail d’amour</strong> que <strong>Cresson</strong> décrit comme étant souvent ignorée. Elle fait référence à la gestion invisible des tâches domestiques et familiales, par exemple le fait de penser à tout ce qui est nécessaire pour maintenir l’équilibre familial, y compris la santé des membres de la famille. Bien que ce travail ne soit pas toujours visible ou valorisé, il représente une charge constante pour les femmes et renforce l’inégalité de genre dans la répartition des tâches domestiques.</p>
</section>
</section>
<section id="le-travail-damour-dans-les-professions-du-care-sous-rémunération-et-dévalorisation" class="level3">
<h3 class="anchored" data-anchor-id="le-travail-damour-dans-les-professions-du-care-sous-rémunération-et-dévalorisation">2. Le “travail d’amour” dans les professions du care : sous-rémunération et dévalorisation</h3>
<p>Le <strong>travail d’amour</strong> ne se limite pas à la sphère familiale. Il s’étend également aux professions du <strong>care</strong>, telles que l’infirmerie, le travail social ou l’enseignement, qui sont fortement féminisées. Dans ces professions, les femmes effectuent un travail essentiel, mais qui reste sous-payé et dévalorisé, car il est considéré comme une extension naturelle de leur rôle domestique.</p>
<section id="exemple-infirmières-et-travailleuses-sociales" class="level4">
<h4 class="anchored" data-anchor-id="exemple-infirmières-et-travailleuses-sociales">Exemple : Infirmières et travailleuses sociales</h4>
<p>Dans les professions de soin, les femmes apportent non seulement des soins physiques, mais aussi un soutien émotionnel aux patients ou aux clients. Comme l’explique <strong>Hilary Graham</strong> dans son ouvrage <strong>“Caring: A Labour of Love”</strong>, “le travail d’amour dans les professions de soin va au-delà des simples tâches techniques ; il implique une dimension émotionnelle qui est souvent considérée comme allant de soi, ce qui renforce la dévalorisation de ces professions” (Graham, 1983). Cette dimension émotionnelle, associée à des compétences comme l’écoute et l’empathie, est pourtant essentielle pour le bien-être des personnes prises en charge.</p>
</section>
<section id="conséquence-précarité-économique" class="level4">
<h4 class="anchored" data-anchor-id="conséquence-précarité-économique">Conséquence : Précarité économique</h4>
<p>Les femmes travaillant dans ces secteurs sont souvent mal rémunérées, malgré l’importance sociale de leur travail. <strong>Geneviève Cresson</strong> rappelle que cette sous-rémunération est une conséquence directe du fait que “le travail de care est perçu comme une extension des responsabilités familiales, ce qui justifie une rémunération inférieure” (Cresson, 1991). Les travailleuses du <strong>care</strong> se retrouvent ainsi dans une situation de précarité économique, car leur travail est systématiquement dévalorisé, même s’il est crucial pour le fonctionnement de la société.</p>
</section>
</section>
<section id="dépendance-et-précarité-économiques" class="level3">
<h3 class="anchored" data-anchor-id="dépendance-et-précarité-économiques">3. Dépendance et précarité économiques</h3>
<p>Le <strong>travail d’amour</strong> impacte également l’indépendance économique des femmes. En assumant des responsabilités non rémunérées ou sous-rémunérées, les femmes se trouvent souvent limitées dans leurs choix professionnels, contraintes de réduire leur temps de travail ou d’accepter des emplois précaires pour concilier vie familiale et professionnelle.</p>
<section id="exemple-femmes-à-temps-partiel" class="level4">
<h4 class="anchored" data-anchor-id="exemple-femmes-à-temps-partiel">Exemple : Femmes à temps partiel</h4>
<p>De nombreuses femmes, en raison de leur rôle de soignantes, se retrouvent à travailler à temps partiel, limitant ainsi leurs opportunités de carrière et leur accès aux prestations sociales. Cette situation aggrave les inégalités économiques entre les sexes. <strong>Hilary Graham</strong> observe que “le temps partiel et la flexibilité dans le travail sont souvent vus comme une solution pour les femmes, mais en réalité, ils maintiennent les femmes dans un cercle de précarité économique” (Graham, 1983). Cela devient particulièrement critique lorsque ces femmes atteignent l’âge de la retraite, car leurs contributions limitées à des systèmes de pensions conduisent à des revenus de retraite insuffisants, exacerbant leur précarité économique.</p>
</section>
</section>
<section id="revalorisation-du-travail-damour-vers-des-solutions" class="level3">
<h3 class="anchored" data-anchor-id="revalorisation-du-travail-damour-vers-des-solutions">4. Revalorisation du “travail d’amour” : vers des solutions</h3>
<p>Il est essentiel de reconnaître la valeur du <strong>travail d’amour</strong> et de mettre en place des politiques visant à le revaloriser, tant dans la sphère domestique que professionnelle. Plusieurs pistes peuvent être envisagées pour corriger les inégalités et améliorer la situation des femmes qui assument ces responsabilités.</p>
<section id="reconnaissance-économique-et-sociale" class="level4">
<h4 class="anchored" data-anchor-id="reconnaissance-économique-et-sociale">Reconnaissance économique et sociale</h4>
<p>Des mesures politiques pourraient être adoptées pour mieux reconnaître le <strong>travail d’amour</strong>. Par exemple, en introduisant des aides financières pour les aidants familiaux, ou en augmentant les salaires des professions du <strong>care</strong>. <strong>Geneviève Cresson</strong> appelle à une “reconnaissance publique et financière des soins non rémunérés pour alléger la charge pesant sur les femmes” (Cresson, 1991).</p>
</section>
<section id="partage-égalitaire-des-tâches" class="level4">
<h4 class="anchored" data-anchor-id="partage-égalitaire-des-tâches">Partage égalitaire des tâches</h4>
<p>Il est également crucial de promouvoir un partage plus égalitaire des responsabilités de soins entre hommes et femmes. <strong>Hilary Graham</strong> souligne que “le travail de soin ne devrait pas être exclusivement assigné aux femmes ; il est nécessaire d’encourager les hommes à prendre part à ces tâches pour alléger la charge qui repose sur les femmes” (Graham, 1983). Cela permettrait non seulement de réduire la charge mentale des femmes, mais aussi d’améliorer l’équilibre entre travail professionnel et tâches domestiques.</p>
</section>
<section id="politiques-de-soutien-aux-aidants" class="level4">
<h4 class="anchored" data-anchor-id="politiques-de-soutien-aux-aidants">Politiques de soutien aux aidants</h4>
<p>Les politiques publiques pourraient également inclure des <strong>congés parentaux</strong> ou <strong>congés pour aidants</strong>, bien rémunérés et accessibles aux deux sexes, pour permettre aux aidants de concilier plus facilement vie professionnelle et responsabilités familiales sans subir de conséquences financières négatives.</p>
</section>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p>Le <strong>travail d’amour</strong> est un élément central mais largement invisible du fonctionnement social. Il repose sur une division genrée du travail qui confine les femmes à des tâches non rémunérées ou sous-rémunérées, tant dans la sphère privée que dans les professions du <strong>care</strong>. Revaloriser ce travail en reconnaissant ses dimensions économiques, sociales et émotionnelles est essentiel pour corriger les inégalités persistantes entre les sexes et pour améliorer la qualité de vie des femmes.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>